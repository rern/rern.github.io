<!DOCTYPE html>
<head>
<style>
body {
	background-color: #ddd;
	margin: 0;
}
div.abbrev {
	margin-top:8px;
}
input.abbrev {
	font-weight:bold;
}
.hide {
	display: none;
}
#titlebar {
	height: 40px;
	background-image: url( './_COM/PNG/TITLEBAR.PNG' );
	background-size: cover;
	font-size: 26px;
	line-height: 40px;
	padding-left: 10px;
}
#logo {
	width: 40px;
	margin: 2px 15px;
	vertical-align: -9px;
}
#back {
	font-size: 24px;
	line-height: 50px;
	cursor: pointer;
}
.link {
	text-decoration: underline;
	color: blue;
	cursor: pointer;
}
#sub li {
	list-style: none;
}
li img {
	margin-right: 5px;
}
</style>
</head>
<html>
<body>

<div id="titlebar"><img id="logo" src="./_COM/PNG/logo.svg">Civic FD - Service Manual</div>
<ul id="main"></ul>
<ul id="sub" class="hide"></ul>
<script src="level_js_title.js"></script>
<script src="html_img_title.js"></script>
<script>
var main = document.getElementById( 'main' );
var sub = document.getElementById( 'sub' );

var htmlmain = '';
var level = 0;
level_js_title.forEach( el => {
	if ( el[ 0 ] === 0 ) {
		if ( level !== 0 ) htmlmain += level === 1 ? '</ul>' : '</ul></ul>';
		level = 0;
	} else if ( el[ 0 ] === 1 ) {
		if ( level !== 1 ) htmlmain += level === 0 ? '<ul>' : '</ul>';
		level = 1;
	} else if ( el[ 0 ] === 2 ) {
		if ( level !== 2 ) htmlmain += '<ul>';
		level = 2;
	}
	htmlmain += ( el[ 1 ] ? '<li data-js="'+ el[ 1 ] +'" class="link">' : '<li>' ) + el[ 2 ] +'</li>';
} );
main.innerHTML = htmlmain;

var li = document.querySelectorAll( '#main li' );
li.forEach( el => {
	el.addEventListener( 'click', function() {
		var title = this.textContent;
		var js = this.dataset.js;
		var script = document.createElement( 'script' );
		script.onload = function () {
			var list   = FIN();
			var htmlsub = '<li><a id="back">&#11164; '+ title +'</a></li>';
			console.log(title)
			var data;
			list.forEach( html => {
				data = html_img_title[ html ]
				htmlsub += '<li><img src="A00/PNG/CTL/'+ data[ 0 ] +'.PNG"> <a href="A00/HTML/'+ html.slice( 5, 7 ) +'/'+ html +'.HTML" target="_blank">'+ data[ 1 ] +'<a></li>';
			} );
			main.classList.add( 'hide' );
			sub.innerHTML = htmlsub;
			sub.classList.remove( 'hide' );
			var back = document.getElementById( 'back' );
			back.addEventListener( 'click', function() {
				sub.innerHTML = '';
				main.classList.remove( 'hide' );
			} );
		}	
		script.src = 'A00/TABLE/INDEX/6/'+ js +'.JS';
		document.body.appendChild( script );
	} );
} );
</script>
</body>
</html>